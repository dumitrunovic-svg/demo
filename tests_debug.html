<!DOCTYPE html>
<html>
<head>
    <title>Tests Debug</title>
    <style>
        body { font-family: sans-serif; max-width: 1200px; margin: 20px auto; padding: 0 20px; }
        .test { border: 1px solid #ddd; margin: 20px 0; padding: 20px; }
        img { max-width: 300px; border: 1px solid #ccc; margin: 10px; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Tests Debug - Image Loading Test</h1>
    <div id="status">Loading...</div>
    <div id="content"></div>
    
    <script>
    async function testImageLoading() {
        const status = document.getElementById('status');
        const content = document.getElementById('content');
        
        try {
            // Fetch manifest
            const response = await fetch('tests/manifest.json');
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            
            status.innerHTML = `<span class="success">✓ Manifest loaded: ${data.tests.length} tests</span>`;
            
            // Find tests with images
            const testsWithImages = data.tests.filter(t => t.images && t.images.length > 0);
            content.innerHTML += `<p>Tests with images: ${testsWithImages.length}</p>`;
            
            testsWithImages.forEach(test => {
                const div = document.createElement('div');
                div.className = 'test';
                div.innerHTML = `<h2>${test.name} (${test.id})</h2>`;
                
                test.images.forEach(img => {
                    // Determine path
                    let imgPath = '';
                    if (test.id === 'scenario-5-robotics' || test.id === 'scenario-6-sdc') {
                        imgPath = `demo_images/${img.filename}`;
                    } else if (test.id === 'social-density-effect') {
                        imgPath = `tests/social_density/${img.filename}`;
                    } else if (test.id === 'zor-refract-20seeds') {
                        imgPath = `tests/refract/${img.filename}`;
                    }
                    
                    div.innerHTML += `
                        <div>
                            <p><strong>Path:</strong> ${imgPath}</p>
                            <img src="${imgPath}" alt="${img.caption}" 
                                 onerror="this.parentElement.innerHTML='<p class=error>❌ Failed to load: ${imgPath}</p>'"
                                 onload="this.parentElement.innerHTML+='<p class=success>✓ Loaded successfully</p>'">
                            <p><em>${img.caption}</em></p>
                        </div>
                    `;
                });
                
                content.appendChild(div);
            });
            
        } catch (error) {
            status.innerHTML = `<span class="error">✗ Error: ${error.message}</span>`;
            content.innerHTML = `<pre>${error.stack}</pre>`;
        }
    }
    
    testImageLoading();
    </script>
</body>
</html>
