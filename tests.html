<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>inZORi - Tests</title>
    <!-- Version: 2026-02-17-v2 - Images enabled -->
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }
        h1 {
            font-size: 32px;
            font-weight: 300;
            margin-bottom: 40px;
            text-align: center;
            color: #222;
        }
        .test-card {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: box-shadow 0.3s;
        }
        .test-card:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        .test-card h2 {
            font-size: 24px;
            font-weight: 600;
            margin-top: 0;
            margin-bottom: 15px;
            color: #0066cc;
        }
        .test-card .meta {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }
        .test-card .category-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
            text-transform: uppercase;
        }
        .category-demo { background: #e3f2fd; color: #1976d2; }
        .category-scientific { background: #fff3e0; color: #f57c00; }
        .status-finished { color: #2e7d32; font-weight: 600; }
        .status-running { color: #1565c0; font-weight: 600; }
        .status-draft { color: #757575; }
        .test-card .description {
            font-size: 16px;
            margin-bottom: 20px;
            line-height: 1.7;
        }
        .test-card .key-findings {
            background: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #0066cc;
            margin: 15px 0;
            font-size: 14px;
        }
        .test-card .key-findings ul {
            margin: 5px 0;
            padding-left: 20px;
        }
        .test-card .metrics {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }
        .metric-box {
            background: #e8f4f8;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 14px;
        }
        .metric-box strong {
            color: #0066cc;
        }
        .test-card .links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        .test-link {
            display: inline-block;
            padding: 8px 16px;
            background: #0066cc;
            color: white !important;
            text-decoration: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.3s;
        }
        .test-link:hover {
            background: #0052a3;
        }
        .back-nav {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 2px solid #ddd;
        }
        .back-nav a {
            color: #0066cc;
            text-decoration: none;
            font-size: 16px;
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>

<h1>inZORi - Tests & Experiments</h1>

<div id="tests-container" class="loading">
    Loading tests...
</div>

<div class="back-nav">
    <a href="index.html">‚Üê Back to Home</a>
</div>

<script>
async function loadTests() {
    try {
        const response = await fetch('tests/manifest.json');
        const data = await response.json();
        
        const container = document.getElementById('tests-container');
        container.innerHTML = '';
        container.classList.remove('loading');
        
        // Filter published tests only
        const publishedTests = data.tests.filter(t => t.published);
        
        if (publishedTests.length === 0) {
            container.innerHTML = '<p class="loading">No published tests yet.</p>';
            return;
        }
        
        publishedTests.forEach(test => {
            const card = document.createElement('div');
            card.className = 'test-card';
            
            // Header
            let html = `<h2>${test.name}</h2>`;
            
            // Meta info
            html += '<div class="meta">';
            html += `<span class="category-badge category-${test.category}">${test.category}</span>`;
            html += `<span class="status-${test.status}">${test.status}</span>`;
            if (test.updated_at) html += ` | Updated: ${test.updated_at}`;
            html += '</div>';
            
            // Description
            html += `<div class="description">${test.description}</div>`;
            
            // Key findings
            if (test.key_findings && test.key_findings.length > 0) {
                html += '<div class="key-findings"><strong>Key Findings:</strong><ul>';
                test.key_findings.forEach(finding => {
                    html += `<li>${finding}</li>`;
                });
                html += '</ul></div>';
            }
            
            // Metrics
            if (test.metrics && Object.keys(test.metrics).length > 0) {
                html += '<div class="metrics">';
                for (const [key, value] of Object.entries(test.metrics)) {
                    if (typeof value === 'object') continue; // Skip nested objects
                    html += `<div class="metric-box"><strong>${key.replace(/_/g, ' ')}:</strong> ${value}</div>`;
                }
                html += '</div>';
            }
            
            // Images (if any)
            if (test.images && test.images.length > 0) {
                html += '<div class="test-images" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 20px 0;">';
                test.images.forEach(img => {
                    // Construct image path based on test ID
                    let imgPath = '';
                    if (test.id === 'scenario-1-dynamic-worlds' || 
                        test.id === 'scenario-2-social-iq' ||
                        test.id === 'scenario-3-versatility' ||
                        test.id === 'scenario-4-tess' ||
                        test.id === 'scenario-5-robotics' || 
                        test.id === 'scenario-6-sdc') {
                        imgPath = `demo_images/${img.filename}`;
                    } else if (test.id === 'social-density-effect') {
                        imgPath = `tests/social_density/${img.filename}`;
                    } else if (test.id === 'zor-refract-20seeds') {
                        imgPath = `tests/refract/${img.filename}`;
                    }
                    
                    if (imgPath) {
                        html += `<div style="border: 1px solid #ddd; border-radius: 4px; overflow: hidden;">
                            <img src="${imgPath}" alt="${img.caption}" style="width: 100%; display: block;">
                            <p style="padding: 8px; font-size: 12px; color: #666; margin: 0;">${img.caption}</p>
                        </div>`;
                    }
                });
                html += '</div>';
            }
            
            // Animations (GIFs)
            if (test.animations && test.animations.length > 0) {
                html += '<div class="test-animations" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin: 20px 0;">';
                test.animations.forEach(anim => {
                    // Construct animation path based on test ID
                    let animPath = '';
                    if (test.id === 'social-density-effect') animPath = `tests/social_density/${anim.filename}`;
                    else if (test.id === 'zor-refract-20seeds') animPath = `tests/refract/${anim.filename}`;
                    
                    if (animPath) {
                        html += `<div style="border: 1px solid #ddd; border-radius: 4px; overflow: hidden;">
                            <img src="${animPath}" alt="${anim.caption}" style="width: 100%; display: block;">
                            <p style="padding: 8px; font-size: 12px; color: #666; margin: 0;">${anim.caption}</p>
                        </div>`;
                    }
                });
                html += '</div>';
            }
            
            // Links
            if (test.links && test.links.length > 0) {
                html += '<div class="links">';
                test.links.forEach(link => {
                    html += `<a href="${link.url}" class="test-link">${link.label}</a>`;
                });
                html += '</div>';
            }
            
            card.innerHTML = html;
            container.appendChild(card);
        });
        
    } catch (error) {
        document.getElementById('tests-container').innerHTML = 
            `<p class="loading" style="color: #d32f2f;">Error loading tests: ${error.message}</p>`;
    }
}

// Load tests on page load
loadTests();
</script>

</body>
</html>
